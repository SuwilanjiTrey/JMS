"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3956],{285:(e,a,t)=>{t.d(a,{$:()=>l});var r=t(5155);t(2115);var s=t(9708),n=t(2085),i=t(9434);let d=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:a,variant:t,size:n,asChild:l=!1,...o}=e,c=l?s.DX:"button";return(0,r.jsx)(c,{"data-slot":"button",className:(0,i.cn)(d({variant:t,size:n,className:a})),...o})}},2101:(e,a,t)=>{t.d(a,{AuthProvider:()=>u,A:()=>m});var r=t(5155),s=t(2115),n=t(5404),i=t(5181),d=t(5932),l=t(5317);let o=async e=>{try{var a,t,r,s;let n=await (0,l.x7)((0,l.H9)(i.db,d.I.USERS,e.uid));if(!n.exists())return null;let o=n.data();return{id:e.uid,email:e.email||"",displayName:e.displayName||o.displayName||"",role:o.role,photoURL:e.photoURL||o.photoURL||"",createdAt:(null==(a=o.createdAt)?void 0:a.toDate())||new Date,updatedAt:(null==(t=o.updatedAt)?void 0:t.toDate())||new Date,isActive:null==(s=o.isActive)||s,lastLoginAt:null==(r=o.lastLoginAt)?void 0:r.toDate(),profile:o.profile}}catch(e){return console.error("Error converting Firebase user to app user:",e),null}},c=(0,s.createContext)(void 0);function u(e){let{children:a}=e,[t,d]=(0,s.useState)(null),[l,u]=(0,s.useState)(null),[m,x]=(0,s.useState)(!0);(0,s.useEffect)(()=>{if(!i.j)return void x(!1);let e=(0,n.hg)(i.j,async e=>{if(e)try{let a=await o(e);a&&(d(a),u(a.role),localStorage.setItem("userRole",a.role),localStorage.setItem("userName",a.displayName))}catch(e){console.error("Error converting Firebase user:",e),d(null),u(null),localStorage.removeItem("userRole"),localStorage.removeItem("userName")}else d(null),u(null),localStorage.removeItem("userRole"),localStorage.removeItem("userName");x(!1)});return()=>e()},[]);let g=async(e,a)=>{let t={id:"1",email:e,displayName:"Demo User",role:"admin",createdAt:new Date,updatedAt:new Date,isActive:!0};d(t),u(t.role),localStorage.setItem("userRole",t.role),localStorage.setItem("userName",t.displayName)},h=async()=>{i.j&&await i.j.signOut(),d(null),u(null),localStorage.removeItem("userRole"),localStorage.removeItem("userName")},p=async e=>{console.log("Register:",e)};return(0,r.jsx)(c.Provider,{value:{user:t,userRole:l,loading:m,login:g,logout:h,register:p},children:a})}function m(){let e=(0,s.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},3614:(e,a,t)=>{t.d(a,{Vp:()=>i,XD:()=>n,_q:()=>d,_m:()=>s});let r={admin:["read:cases","write:cases","delete:cases","assign:cases","update:rulings","manage:users","manage:calendar","upload:documents","read:documents","summarize:documents","search:cases"],judge:["read:cases","write:cases","update:rulings","manage:calendar","upload:documents","read:documents","summarize:documents","search:cases"],lawyer:["read:cases","write:cases","upload:documents","read:documents","summarize:documents","search:cases"],public:["read:cases","search:cases"]},s=(e,a)=>r[e].includes(a),n={draft:"bg-gray-100 text-gray-800",active:"bg-blue-100 text-blue-800",pending:"bg-yellow-100 text-yellow-800",closed:"bg-green-100 text-green-800",appealed:"bg-purple-100 text-purple-800",dismissed:"bg-red-100 text-red-800"},i={low:"bg-green-100 text-green-800",medium:"bg-yellow-100 text-yellow-800",high:"bg-orange-100 text-orange-800",urgent:"bg-red-100 text-red-800"},d={civil:"Civil",criminal:"Criminal",family:"Family",commercial:"Commercial",constitutional:"Constitutional",other:"Other"}},5060:(e,a,t)=>{t.d(a,{A:()=>b});var r=t(5155),s=t(6874),n=t.n(s),i=t(5695),d=t(9434),l=t(3783),o=t(7434),c=t(9074),u=t(7580),m=t(7924),x=t(381),g=t(7879),h=t(3052),p=t(285),v=t(6126);function b(e){let{userRole:a,isOpen:t,onClose:s}=e,b=(0,i.usePathname)(),f=(e=>{let a=[{name:"Dashboard",href:"admin"===e?"/admin":"judge"===e?"/judges":"lawyer"===e?"/lawyers":"/public",icon:l.A}];return"public"!==e&&a.push({name:"Cases",href:"admin"===e?"/admin/cases":"judge"===e?"/judges/cases":"/lawyers/cases",icon:o.A}),("admin"===e||"judge"===e)&&a.push({name:"Calendar",href:"admin"===e?"/admin/calendar":"/judges/calendar",icon:c.A}),"admin"===e&&a.push({name:"Users",href:"/admin/users",icon:u.A}),"lawyer"===e&&a.push({name:"Documents",href:"/lawyers/documents",icon:o.A}),"public"===e&&(a.push({name:"Search Cases",href:"/public/cases",icon:m.A}),a.push({name:"Advanced Search",href:"/public/search",icon:m.A,badge:"New"})),a.push({name:"Settings",href:"/settings",icon:x.A}),a})(a),y=e=>b===e||b.startsWith(e+"/");return t?(0,r.jsx)("div",{className:"fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out",children:(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(g.A,{className:"h-6 w-6 text-zambia-orange mr-2"}),(0,r.jsx)("span",{className:"text-lg font-bold text-zambia-black",children:"JMS Zambia"})]}),(0,r.jsx)(p.$,{variant:"ghost",size:"sm",onClick:s,children:(0,r.jsx)(h.A,{className:"h-4 w-4"})})]}),(0,r.jsx)("div",{className:"p-4 border-b",children:(0,r.jsx)(v.E,{className:(e=>{switch(e){case"admin":return"bg-zambia-orange text-white";case"judge":return"bg-zambia-green text-white";case"lawyer":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}})(a),children:a.charAt(0).toUpperCase()+a.slice(1)})}),(0,r.jsx)("nav",{className:"flex-1 px-4 py-4 space-y-2 overflow-y-auto",children:f.map(e=>(0,r.jsxs)(n(),{href:e.href,className:(0,d.cn)("flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",y(e.href)?"bg-zambia-orange text-white":"text-gray-700 hover:bg-gray-100 hover:text-zambia-orange"),onClick:s,children:[(0,r.jsx)(e.icon,{className:"mr-3 h-4 w-4"}),(0,r.jsx)("span",{className:"flex-1",children:e.name}),e.badge&&(0,r.jsx)(v.E,{variant:"secondary",className:"text-xs",children:e.badge})]},e.name))}),(0,r.jsx)("div",{className:"p-4 border-t",children:(0,r.jsxs)("div",{className:"text-xs text-gray-500 text-center",children:["Judicial Management System",(0,r.jsx)("br",{}),"\xa9 2024 Republic of Zambia"]})})]})}):null}},5181:(e,a,t)=>{t.d(a,{db:()=>d,j:()=>l});var r=t(3915),s=t(5317),n=t(5404);let i=(0,r.Wp)({apiKey:"AIzaSyCQCjFANCjZARPneTFAaDHqkOKe5xD2DPM",authDomain:"judiciary-management-system.firebaseapp.com",projectId:"judiciary-management-system",storageBucket:"judiciary-management-system.firebasestorage.app",messagingSenderId:"537393739795",appId:"1:537393739795:web:6651221da1f64208f227e6",measurementId:"G-REZMV74MS7"}),d=(0,s.aU)(i),l=(0,n.xI)(i)},5932:(e,a,t)=>{t.d(a,{I:()=>r});let r={USERS:"users",CASES:"cases",HEARINGS:"hearings",DOCUMENTS:"documents",RULINGS:"rulings",ROLES:"roles"}},5977:(e,a,t)=>{t.d(a,{A:()=>I});var r=t(5155),s=t(2115),n=t(6874),i=t.n(n),d=t(5695),l=t(285),o=t(6126),c=t(4011),u=t(9434);function m(e){let{className:a,...t}=e;return(0,r.jsx)(c.bL,{"data-slot":"avatar",className:(0,u.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",a),...t})}function x(e){let{className:a,...t}=e;return(0,r.jsx)(c._V,{"data-slot":"avatar-image",className:(0,u.cn)("aspect-square size-full",a),...t})}function g(e){let{className:a,...t}=e;return(0,r.jsx)(c.H4,{"data-slot":"avatar-fallback",className:(0,u.cn)("bg-muted flex size-full items-center justify-center rounded-full",a),...t})}var h=t(8698);function p(e){let{...a}=e;return(0,r.jsx)(h.bL,{"data-slot":"dropdown-menu",...a})}function v(e){let{...a}=e;return(0,r.jsx)(h.l9,{"data-slot":"dropdown-menu-trigger",...a})}function b(e){let{className:a,sideOffset:t=4,...s}=e;return(0,r.jsx)(h.ZL,{children:(0,r.jsx)(h.UC,{"data-slot":"dropdown-menu-content",sideOffset:t,className:(0,u.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",a),...s})})}function f(e){let{className:a,inset:t,variant:s="default",...n}=e;return(0,r.jsx)(h.q7,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":s,className:(0,u.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...n})}function y(e){let{className:a,inset:t,...s}=e;return(0,r.jsx)(h.JU,{"data-slot":"dropdown-menu-label","data-inset":t,className:(0,u.cn)("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",a),...s})}function j(e){let{className:a,...t}=e;return(0,r.jsx)(h.wv,{"data-slot":"dropdown-menu-separator",className:(0,u.cn)("bg-border -mx-1 my-1 h-px",a),...t})}var w=t(7879),N=t(7924),z=t(3861),A=t(1007),S=t(381),k=t(4835),C=t(4783);function I(e){let{userRole:a,userName:t,userAvatar:n}=e,[c,u]=(0,s.useState)(!1),h=(0,d.useRouter)(),I=e=>{switch(e){case"admin":return"/admin";case"judge":return"/judges";case"lawyer":return"/lawyers";case"public":return"/public";default:return"/"}};return(0,r.jsxs)("nav",{className:"bg-white border-b border-gray-200 sticky top-0 z-50",children:[(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsxs)(i(),{href:a?I(a):"/",className:"flex items-center",children:[(0,r.jsx)(w.A,{className:"h-8 w-8 text-zambia-orange mr-2"}),(0,r.jsx)("span",{className:"text-xl font-bold text-zambia-black",children:"JMS Zambia"})]})}),a&&(0,r.jsxs)("div",{className:"hidden md:flex items-center space-x-4",children:[(0,r.jsx)(i(),{href:I(a),className:"text-gray-700 hover:text-zambia-orange px-3 py-2 rounded-md text-sm font-medium",children:"Dashboard"}),"public"!==a&&(0,r.jsx)(i(),{href:"".concat(I(a),"/cases"),className:"text-gray-700 hover:text-zambia-orange px-3 py-2 rounded-md text-sm font-medium",children:"Cases"}),("admin"===a||"judge"===a)&&(0,r.jsx)(i(),{href:"".concat(I(a),"/calendar"),className:"text-gray-700 hover:text-zambia-orange px-3 py-2 rounded-md text-sm font-medium",children:"Calendar"}),"admin"===a&&(0,r.jsx)(i(),{href:"/admin/users",className:"text-gray-700 hover:text-zambia-orange px-3 py-2 rounded-md text-sm font-medium",children:"Users"}),"lawyer"===a&&(0,r.jsx)(i(),{href:"/lawyers/documents",className:"text-gray-700 hover:text-zambia-orange px-3 py-2 rounded-md text-sm font-medium",children:"Documents"}),"public"===a&&(0,r.jsx)(i(),{href:"/public/search",className:"text-gray-700 hover:text-zambia-orange px-3 py-2 rounded-md text-sm font-medium",children:"Search"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(l.$,{variant:"ghost",size:"sm",children:(0,r.jsx)(N.A,{className:"h-4 w-4"})}),(0,r.jsx)(l.$,{variant:"ghost",size:"sm",children:(0,r.jsx)(z.A,{className:"h-4 w-4"})}),a&&t&&(0,r.jsxs)(p,{children:[(0,r.jsx)(v,{asChild:!0,children:(0,r.jsxs)(l.$,{variant:"ghost",className:"flex items-center space-x-2",children:[(0,r.jsxs)(m,{className:"h-8 w-8",children:[(0,r.jsx)(x,{src:n,alt:t}),(0,r.jsx)(g,{children:t.split(" ").map(e=>e[0]).join("").toUpperCase()})]}),(0,r.jsxs)("div",{className:"hidden md:block text-left",children:[(0,r.jsx)("div",{className:"text-sm font-medium",children:t}),(0,r.jsx)(o.E,{className:(e=>{switch(e){case"admin":return"bg-zambia-orange text-white";case"judge":return"bg-zambia-green text-white";case"lawyer":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}})(a),children:a})]})]})}),(0,r.jsxs)(b,{align:"end",className:"w-56",children:[(0,r.jsx)(y,{children:"My Account"}),(0,r.jsx)(j,{}),(0,r.jsxs)(f,{children:[(0,r.jsx)(A.A,{className:"mr-2 h-4 w-4"}),"Profile"]}),(0,r.jsxs)(f,{children:[(0,r.jsx)(S.A,{className:"mr-2 h-4 w-4"}),"Settings"]}),(0,r.jsx)(j,{}),(0,r.jsxs)(f,{onClick:()=>{localStorage.removeItem("userRole"),localStorage.removeItem("userName"),h.push("/login")},children:[(0,r.jsx)(k.A,{className:"mr-2 h-4 w-4"}),"Logout"]})]})]}),a&&(0,r.jsx)(l.$,{variant:"ghost",size:"sm",className:"md:hidden",onClick:()=>u(!c),children:(0,r.jsx)(C.A,{className:"h-4 w-4"})})]})]})}),c&&a&&(0,r.jsx)("div",{className:"md:hidden",children:(0,r.jsxs)("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3 bg-white border-t",children:[(0,r.jsx)(i(),{href:I(a),className:"text-gray-700 hover:text-zambia-orange block px-3 py-2 rounded-md text-base font-medium",children:"Dashboard"}),"public"!==a&&(0,r.jsx)(i(),{href:"".concat(I(a),"/cases"),className:"text-gray-700 hover:text-zambia-orange block px-3 py-2 rounded-md text-base font-medium",children:"Cases"}),("admin"===a||"judge"===a)&&(0,r.jsx)(i(),{href:"".concat(I(a),"/calendar"),className:"text-gray-700 hover:text-zambia-orange block px-3 py-2 rounded-md text-base font-medium",children:"Calendar"}),"admin"===a&&(0,r.jsx)(i(),{href:"/admin/users",className:"text-gray-700 hover:text-zambia-orange block px-3 py-2 rounded-md text-base font-medium",children:"Users"}),"lawyer"===a&&(0,r.jsx)(i(),{href:"/lawyers/documents",className:"text-gray-700 hover:text-zambia-orange block px-3 py-2 rounded-md text-base font-medium",children:"Documents"}),"public"===a&&(0,r.jsx)(i(),{href:"/public/search",className:"text-gray-700 hover:text-zambia-orange block px-3 py-2 rounded-md text-base font-medium",children:"Search"})]})})]})}},6126:(e,a,t)=>{t.d(a,{E:()=>l});var r=t(5155);t(2115);var s=t(9708),n=t(2085),i=t(9434);let d=(0,n.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:a,variant:t,asChild:n=!1,...l}=e,o=n?s.DX:"span";return(0,r.jsx)(o,{"data-slot":"badge",className:(0,i.cn)(d({variant:t}),a),...l})}},9434:(e,a,t)=>{t.d(a,{cn:()=>n});var r=t(2596),s=t(9688);function n(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,s.QP)((0,r.$)(a))}},9783:(e,a,t)=>{t.d(a,{A:()=>d});var r=t(5155),s=t(2115),n=t(5695),i=t(3614);function d(e){let{children:a,allowedRoles:t,requiredPermission:d,redirectTo:l="/login",fallback:o}=e,c=(0,n.useRouter)();(0,s.useEffect)(()=>{(()=>{let e=localStorage.getItem("userRole");if(!e)return c.push(l);if(!t.includes(e)){let a=u(e);c.push(a);return}if(d&&!(0,i._m)(e,d))return c.push("/unauthorized")})()},[t,d,l,c]);let u=e=>{switch(e){case"admin":return"/admin";case"judge":return"/judges";case"lawyer":return"/lawyers";case"public":return"/public";default:return"/"}},m=localStorage.getItem("userRole");return m&&t.includes(m)?d&&!(0,i._m)(m,d)?o||(0,r.jsx)("div",{className:"p-4",children:"Access denied"}):(0,r.jsx)(r.Fragment,{children:a}):o||(0,r.jsx)("div",{className:"p-4",children:"Loading..."})}}}]);