(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{2101:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>d,A:()=>m});var a=r(5155),s=r(2115),l=r(5404),u=r(5181),o=r(5932),n=r(5317);let i=async e=>{try{var t,r,a,s;let l=await (0,n.x7)((0,n.H9)(u.db,o.I.USERS,e.uid));if(!l.exists())return null;let i=l.data();return{id:e.uid,email:e.email||"",displayName:e.displayName||i.displayName||"",role:i.role,photoURL:e.photoURL||i.photoURL||"",createdAt:(null==(t=i.createdAt)?void 0:t.toDate())||new Date,updatedAt:(null==(r=i.updatedAt)?void 0:r.toDate())||new Date,isActive:null==(s=i.isActive)||s,lastLoginAt:null==(a=i.lastLoginAt)?void 0:a.toDate(),profile:i.profile}}catch(e){return console.error("Error converting Firebase user to app user:",e),null}},c=(0,s.createContext)(void 0);function d(e){let{children:t}=e,[r,o]=(0,s.useState)(null),[n,d]=(0,s.useState)(null),[m,g]=(0,s.useState)(!0);(0,s.useEffect)(()=>{if(!u.j)return void g(!1);let e=(0,l.hg)(u.j,async e=>{if(e)try{let t=await i(e);t&&(o(t),d(t.role),localStorage.setItem("userRole",t.role),localStorage.setItem("userName",t.displayName))}catch(e){console.error("Error converting Firebase user:",e),o(null),d(null),localStorage.removeItem("userRole"),localStorage.removeItem("userName")}else o(null),d(null),localStorage.removeItem("userRole"),localStorage.removeItem("userName");g(!1)});return()=>e()},[]);let p=async(e,t)=>{let r={id:"1",email:e,displayName:"Demo User",role:"admin",createdAt:new Date,updatedAt:new Date,isActive:!0};o(r),d(r.role),localStorage.setItem("userRole",r.role),localStorage.setItem("userName",r.displayName)},v=async()=>{u.j&&await u.j.signOut(),o(null),d(null),localStorage.removeItem("userRole"),localStorage.removeItem("userName")},h=async e=>{console.log("Register:",e)};return(0,a.jsx)(c.Provider,{value:{user:r,userRole:n,loading:m,login:p,logout:v,register:h},children:t})}function m(){let e=(0,s.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},3792:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var a=r(5155),s=r(2115),l=r(5695),u=r(2101);function o(){let{user:e,userRole:t,loading:r}=(0,u.A)(),o=(0,l.useRouter)();(0,s.useEffect)(()=>{if(!r)if(e&&t){let e=n(t);o.push(e)}else o.push("/login")},[e,t,r,o]);let n=e=>{switch(e){case"admin":return"/admin";case"judge":return"/judges";case"lawyer":return"/lawyers";case"public":return"/public";default:return"/"}};return r?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-zambia-orange mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading Judicial Management System..."})]})}):null}},5181:(e,t,r)=>{"use strict";r.d(t,{db:()=>o,j:()=>n});var a=r(3915),s=r(5317),l=r(5404);let u=(0,a.Wp)({apiKey:"AIzaSyCQCjFANCjZARPneTFAaDHqkOKe5xD2DPM",authDomain:"judiciary-management-system.firebaseapp.com",projectId:"judiciary-management-system",storageBucket:"judiciary-management-system.firebasestorage.app",messagingSenderId:"537393739795",appId:"1:537393739795:web:6651221da1f64208f227e6",measurementId:"G-REZMV74MS7"}),o=(0,s.aU)(u),n=(0,l.xI)(u)},5372:(e,t,r)=>{Promise.resolve().then(r.bind(r,3792))},5695:(e,t,r)=>{"use strict";var a=r(8999);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},5932:(e,t,r)=>{"use strict";r.d(t,{I:()=>a});let a={USERS:"users",CASES:"cases",HEARINGS:"hearings",DOCUMENTS:"documents",RULINGS:"rulings",ROLES:"roles"}}},e=>{var t=t=>e(e.s=t);e.O(0,[9135,3965,6345,8441,1684,7358],()=>t(5372)),_N_E=e.O()}]);