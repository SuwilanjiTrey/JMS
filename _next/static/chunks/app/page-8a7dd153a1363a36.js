(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{33792:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var a=r(95155),s=r(12115),l=r(35695),u=r(40283);function o(){let{user:e,userRole:t,loading:r}=(0,u.A)(),o=(0,l.useRouter)();(0,s.useEffect)(()=>{if(!r)if(e&&t){let e=n(t);o.push(e)}else o.push("/login")},[e,t,r,o]);let n=e=>{switch(e){case"admin":return"/admin";case"judge":return"/judges";case"lawyer":return"/lawyers";case"public":return"/public";default:return"/"}};return r?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-zambia-orange mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading Judicial Management System..."})]})}):null}},35695:(e,t,r)=>{"use strict";var a=r(18999);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},40283:(e,t,r)=>{"use strict";r.d(t,{A:()=>c,AuthProvider:()=>i});var a=r(95155),s=r(12115),l=r(45404),u=r(55181),o=r(79323);let n=(0,s.createContext)(void 0);function i(e){let{children:t}=e,[r,i]=(0,s.useState)(null),[c,d]=(0,s.useState)(null),[m,g]=(0,s.useState)(!0);(0,s.useEffect)(()=>{if(!u.j)return void g(!1);let e=(0,l.hg)(u.j,async e=>{if(e)try{let t=await (0,o.cS)(e);t&&(i(t),d(t.role),localStorage.setItem("userRole",t.role),localStorage.setItem("userName",t.displayName))}catch(e){console.error("Error converting Firebase user:",e),i(null),d(null),localStorage.removeItem("userRole"),localStorage.removeItem("userName")}else i(null),d(null),localStorage.removeItem("userRole"),localStorage.removeItem("userName");g(!1)});return()=>e()},[]);let p=async(e,t)=>{let r={id:"1",email:e,displayName:"Demo User",role:"admin",createdAt:new Date,updatedAt:new Date,isActive:!0};i(r),d(r.role),localStorage.setItem("userRole",r.role),localStorage.setItem("userName",r.displayName)},v=async()=>{u.j&&await u.j.signOut(),i(null),d(null),localStorage.removeItem("userRole"),localStorage.removeItem("userName")},h=async e=>{console.log("Register:",e)};return(0,a.jsx)(n.Provider,{value:{user:r,userRole:c,loading:m,login:p,logout:v,register:h},children:t})}function c(){let e=(0,s.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},45932:(e,t,r)=>{"use strict";r.d(t,{I:()=>a});let a={USERS:"users",CASES:"cases",HEARINGS:"hearings",DOCUMENTS:"documents",RULINGS:"rulings",ROLES:"roles"}},55181:(e,t,r)=>{"use strict";r.d(t,{db:()=>o,j:()=>n});var a=r(23915),s=r(35317),l=r(45404);let u=(0,a.Wp)({apiKey:"AIzaSyCQCjFANCjZARPneTFAaDHqkOKe5xD2DPM",authDomain:"judiciary-management-system.firebaseapp.com",projectId:"judiciary-management-system",storageBucket:"judiciary-management-system.firebasestorage.app",messagingSenderId:"537393739795",appId:"1:537393739795:web:6651221da1f64208f227e6",measurementId:"G-REZMV74MS7"}),o=(0,s.aU)(u),n=(0,l.xI)(u)},79323:(e,t,r)=>{"use strict";r.d(t,{cS:()=>u});var a=r(55181),s=r(45932);r(45404);var l=r(35317);let u=async e=>{try{var t,r,u,o;let n=await (0,l.x7)((0,l.H9)(a.db,s.I.USERS,e.uid));if(!n.exists())return null;let i=n.data();return{id:e.uid,email:e.email||"",displayName:e.displayName||i.displayName||"",role:i.role,photoURL:e.photoURL||i.photoURL||"",createdAt:(null==(t=i.createdAt)?void 0:t.toDate())||new Date,updatedAt:(null==(r=i.updatedAt)?void 0:r.toDate())||new Date,isActive:null==(o=i.isActive)||o,lastLoginAt:null==(u=i.lastLoginAt)?void 0:u.toDate(),profile:i.profile}}catch(e){return console.error("Error converting Firebase user to app user:",e),null}}},90610:(e,t,r)=>{Promise.resolve().then(r.bind(r,33792))}},e=>{var t=t=>e(e.s=t);e.O(0,[9135,3965,6345,8441,1684,7358],()=>t(90610)),_N_E=e.O()}]);