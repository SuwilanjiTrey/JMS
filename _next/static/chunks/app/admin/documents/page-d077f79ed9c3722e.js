(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3327],{28905:(e,s,a)=>{"use strict";a.d(s,{C:()=>n});var t=a(12115),l=a(6101),r=a(52712),n=e=>{let{present:s,children:a}=e,n=function(e){var s,a;let[l,n]=t.useState(),c=t.useRef(null),d=t.useRef(e),o=t.useRef("none"),[u,m]=(s=e?"mounted":"unmounted",a={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},t.useReducer((e,s)=>{let t=a[e][s];return null!=t?t:e},s));return t.useEffect(()=>{let e=i(c.current);o.current="mounted"===u?e:"none"},[u]),(0,r.N)(()=>{let s=c.current,a=d.current;if(a!==e){let t=o.current,l=i(s);e?m("MOUNT"):"none"===l||(null==s?void 0:s.display)==="none"?m("UNMOUNT"):a&&t!==l?m("ANIMATION_OUT"):m("UNMOUNT"),d.current=e}},[e,m]),(0,r.N)(()=>{if(l){var e;let s,a=null!=(e=l.ownerDocument.defaultView)?e:window,t=e=>{let t=i(c.current).includes(CSS.escape(e.animationName));if(e.target===l&&t&&(m("ANIMATION_END"),!d.current)){let e=l.style.animationFillMode;l.style.animationFillMode="forwards",s=a.setTimeout(()=>{"forwards"===l.style.animationFillMode&&(l.style.animationFillMode=e)})}},r=e=>{e.target===l&&(o.current=i(c.current))};return l.addEventListener("animationstart",r),l.addEventListener("animationcancel",t),l.addEventListener("animationend",t),()=>{a.clearTimeout(s),l.removeEventListener("animationstart",r),l.removeEventListener("animationcancel",t),l.removeEventListener("animationend",t)}}m("ANIMATION_END")},[l,m]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:t.useCallback(e=>{c.current=e?getComputedStyle(e):null,n(e)},[])}}(s),c="function"==typeof a?a({present:n.isPresent}):t.Children.only(a),d=(0,l.s)(n.ref,function(e){var s,a;let t=null==(s=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:s.get,l=t&&"isReactWarning"in t&&t.isReactWarning;return l?e.ref:(l=(t=null==(a=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:a.get)&&"isReactWarning"in t&&t.isReactWarning)?e.props.ref:e.props.ref||e.ref}(c));return"function"==typeof a||n.isPresent?t.cloneElement(c,{ref:d}):null};function i(e){return(null==e?void 0:e.animationName)||"none"}n.displayName="Presence"},29100:(e,s,a)=>{"use strict";a.d(s,{w:()=>o});var t=a(95155),l=a(12115),r=a(63655),n="horizontal",i=["horizontal","vertical"],c=l.forwardRef((e,s)=>{var a;let{decorative:l,orientation:c=n,...d}=e,o=(a=c,i.includes(a))?c:n;return(0,t.jsx)(r.sG.div,{"data-orientation":o,...l?{role:"none"}:{"aria-orientation":"vertical"===o?o:void 0,role:"separator"},...d,ref:s})});c.displayName="Separator";var d=a(59434);function o(e){let{className:s,orientation:a="horizontal",decorative:l=!0,...r}=e;return(0,t.jsx)(c,{"data-slot":"separator",decorative:l,orientation:a,className:(0,d.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",s),...r})}},29869:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},47924:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},53904:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},55365:(e,s,a)=>{"use strict";a.d(s,{Fc:()=>i,TN:()=>c});var t=a(95155);a(12115);var l=a(74466),r=a(59434);let n=(0,l.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function i(e){let{className:s,variant:a,...l}=e;return(0,t.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,r.cn)(n({variant:a}),s),...l})}function c(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"alert-description",className:(0,r.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",s),...a})}},57434:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},69074:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},75525:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},78089:(e,s,a)=>{"use strict";a.d(s,{CW:()=>n,Fd:()=>d,UK:()=>o,Wv:()=>c,nc:()=>i});var t=a(35317),l=a(55181);let r=e=>{if(null==e||"object"!=typeof e)return e;if(Array.isArray(e))return e.map(e=>r(e));if(e instanceof Date)return e;let s={};for(let[a,t]of Object.entries(e))if(void 0!==t)if(!t||"object"!=typeof t||Array.isArray(t)||t instanceof Date)s[a]=t;else{let e=r(t);Object.keys(e).length>0&&(s[a]=e)}return s};async function n(e,s){let a=!1;try{let n=r(s);await (0,t.gS)((0,t.rJ)(l.db,e),n),a=!0}catch(e){console.error("Error adding document: ",e)}return a}async function i(e,s,a){if(!s||!a)return console.error("Collection name or document ID is missing."),{success:!1,error:"Invalid collection name or document ID."};try{let n=r(e),i=(0,t.H9)(l.db,s,"".concat(a));return await (0,t.BN)(i,n),{success:!0,id:a}}catch(e){if(e instanceof Error)return console.error("Error setting document: ",e.message),{success:!1,error:e.message};return console.error("Unknown error setting document: ",e),{success:!1,error:"Unknown error occurred."}}}async function c(e,s){if(!e||!s)return console.error("Collection name or document ID is missing."),{success:!1,error:"Invalid collection name or document ID."};try{let a=(0,t.H9)(l.db,e,"".concat(s));return await (0,t.kd)(a),console.log('Document with ID "'.concat(s,'" successfully deleted from collection "').concat(e,'".')),{success:!0}}catch(e){return console.error("Error deleting document:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error occurred."}}}async function d(e,s){let a=await (0,t.GG)((0,t.rJ)(l.db,e)),r=[];if(s){let a=(0,t.P)((0,t.rJ)(l.db,e),(0,t.AB)(s));(await (0,t.GG)(a)).forEach(e=>{r.push(e.data())})}else a.forEach(e=>{r.push(e.data())});return r}async function o(e){try{return(await (0,t.GG)((0,t.rJ)(l.db,e))).docs.map(e=>e.data())}catch(e){throw console.error("Error getting documents:",e),e}}},78491:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>V});var t=a(95155),l=a(12115),r=a(66695),n=a(30285),i=a(26126),c=a(62523),d=a(59409),o=a(54165),u=a(88539),m=a(85057),x=a(55365),h=a(29100),p=a(19946);let g=(0,p.A)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var j=a(57434);let f=(0,p.A)("file",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]),v=(0,p.A)("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);var N=a(69074),y=a(75525),b=a(92657),w=a(91788);let S=(0,p.A)("signature",[["path",{d:"m21 17-2.156-1.868A.5.5 0 0 0 18 15.5v.5a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1c0-2.545-3.991-3.97-8.5-4a1 1 0 0 0 0 5c4.153 0 4.745-11.295 5.708-13.5a2.5 2.5 0 1 1 3.31 3.284",key:"y32ogt"}],["path",{d:"M3 21h18",key:"itz85i"}]]);var A=a(62525),C=a(47924),D=a(53904),M=a(29869),k=a(51154),E=a(40646),T=a(85339),F=a(78089),_=a(45932);let I={motion:"Motion",brief:"Brief",evidence:"Evidence",order:"Court Order",judgment:"Judgment",pleading:"Pleading",exhibit:"Exhibit",other:"Other"},L={draft:"bg-gray-100 text-gray-800 border-gray-200",submitted:"bg-blue-100 text-blue-800 border-blue-200",under_review:"bg-yellow-100 text-yellow-800 border-yellow-200",approved:"bg-green-100 text-green-800 border-green-200",rejected:"bg-red-100 text-red-800 border-red-200",sealed:"bg-purple-100 text-purple-800 border-purple-200"},U={unsigned:"bg-gray-100 text-gray-800",pending_signature:"bg-orange-100 text-orange-800",digitally_signed:"bg-green-100 text-green-800",sealed:"bg-purple-100 text-purple-800"};function O(e){var s;let{document:a,onView:l,onDownload:c,onSign:o,onSeal:u,onUpdateStatus:m,onDelete:x}=e;return(0,t.jsxs)(r.Zp,{className:"hover:shadow-lg transition-all duration-200",children:[(0,t.jsx)(r.aR,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3 flex-1",children:[(s=a.mimeType).startsWith("image/")?(0,t.jsx)(g,{className:"w-4 h-4"}):s.includes("pdf")?(0,t.jsx)(j.A,{className:"w-4 h-4"}):(0,t.jsx)(f,{className:"w-4 h-4"}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)(r.ZB,{className:"text-base font-semibold text-gray-900 line-clamp-1",children:a.title}),(0,t.jsx)(r.BT,{className:"text-sm mt-1 line-clamp-1",children:a.fileName})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)(i.E,{className:"text-xs ".concat(L[a.status]),children:a.status.replace("_"," ")}),(0,t.jsx)(i.E,{className:"text-xs ".concat(U[a.signatureStatus]),children:a.signatureStatus.replace("_"," ")})]})]})}),(0,t.jsxs)(r.Wu,{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(v,{className:"w-3 h-3 text-gray-400"}),(0,t.jsx)("span",{className:"font-medium",children:I[a.type]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(f,{className:"w-3 h-3 text-gray-400"}),(0,t.jsx)("span",{className:"font-medium",children:(e=>{if(0===e)return"0 Bytes";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]})(a.fileSize)})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(N.A,{className:"w-3 h-3 text-gray-400"}),(0,t.jsx)("span",{className:"font-medium",children:a.uploadedAt.toLocaleDateString()})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(y.A,{className:"w-3 h-3 text-gray-400"}),(0,t.jsx)("span",{className:"font-medium capitalize",children:a.accessLevel})]})]}),a.caseNumber&&(0,t.jsx)("div",{className:"bg-blue-50 p-2 rounded text-sm",children:(0,t.jsxs)("span",{className:"text-blue-700 font-medium",children:["Case: ",a.caseNumber]})}),a.tags.length>0&&(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:[a.tags.slice(0,3).map((e,s)=>(0,t.jsx)(i.E,{variant:"outline",className:"text-xs",children:e},s)),a.tags.length>3&&(0,t.jsxs)(i.E,{variant:"outline",className:"text-xs",children:["+",a.tags.length-3," more"]})]}),(0,t.jsx)(h.w,{}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(n.$,{size:"sm",variant:"outline",onClick:()=>l(a),className:"flex-1",children:[(0,t.jsx)(b.A,{className:"w-3 h-3 mr-1"}),"View"]}),(0,t.jsxs)(n.$,{size:"sm",variant:"outline",onClick:()=>c(a),className:"flex-1",children:[(0,t.jsx)(w.A,{className:"w-3 h-3 mr-1"}),"Download"]})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:["unsigned"===a.signatureStatus&&(0,t.jsxs)(n.$,{size:"sm",onClick:()=>o(a.id),className:"flex-1 bg-green-600 hover:bg-green-700 text-white",children:[(0,t.jsx)(S,{className:"w-3 h-3 mr-1"}),"Sign"]}),"approved"===a.status&&"sealed"!==a.signatureStatus&&(0,t.jsxs)(d.l6,{onValueChange:e=>u(a.id,e),children:[(0,t.jsx)(d.bq,{className:"flex-1",children:(0,t.jsx)(d.yv,{placeholder:"Seal Document"})}),(0,t.jsxs)(d.gC,{children:[(0,t.jsx)(d.eb,{value:"court",children:"Court Seal"}),(0,t.jsx)(d.eb,{value:"judicial",children:"Judicial Seal"}),(0,t.jsx)(d.eb,{value:"administrative",children:"Administrative Seal"})]})]}),(0,t.jsxs)(d.l6,{onValueChange:e=>m(a.id,e),children:[(0,t.jsx)(d.bq,{className:"flex-1",children:(0,t.jsx)(d.yv,{placeholder:"Update Status"})}),(0,t.jsxs)(d.gC,{children:[(0,t.jsx)(d.eb,{value:"draft",children:"Draft"}),(0,t.jsx)(d.eb,{value:"submitted",children:"Submitted"}),(0,t.jsx)(d.eb,{value:"under_review",children:"Under Review"}),(0,t.jsx)(d.eb,{value:"approved",children:"Approved"}),(0,t.jsx)(d.eb,{value:"rejected",children:"Rejected"})]})]})]}),(0,t.jsxs)(n.$,{size:"sm",variant:"destructive",onClick:()=>x(a.id),className:"w-full",children:[(0,t.jsx)(A.A,{className:"w-3 h-3 mr-1"}),"Delete Document"]})]})]},a.id)}function P(e){let{searchTerm:s,setSearchTerm:a,typeFilter:l,setTypeFilter:i,statusFilter:o,setStatusFilter:u,accessFilter:m,setAccessFilter:x,onRefresh:h,loading:p,onUpload:g}=e;return(0,t.jsx)(r.Zp,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,t.jsx)(C.A,{className:"w-4 h-4 text-gray-400"}),(0,t.jsx)(c.p,{placeholder:"Search documents...",value:s,onChange:e=>a(e.target.value),className:"border-0 shadow-none focus-visible:ring-0"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:[(0,t.jsxs)(d.l6,{value:l,onValueChange:i,children:[(0,t.jsx)(d.bq,{className:"w-full",children:(0,t.jsx)(d.yv,{placeholder:"All Types"})}),(0,t.jsxs)(d.gC,{children:[(0,t.jsx)(d.eb,{value:"all",children:"All Types"}),Object.entries(I).map(e=>{let[s,a]=e;return(0,t.jsx)(d.eb,{value:s,children:a},s)})]})]}),(0,t.jsxs)(d.l6,{value:o,onValueChange:u,children:[(0,t.jsx)(d.bq,{className:"w-full",children:(0,t.jsx)(d.yv,{placeholder:"All Status"})}),(0,t.jsxs)(d.gC,{children:[(0,t.jsx)(d.eb,{value:"all",children:"All Status"}),(0,t.jsx)(d.eb,{value:"draft",children:"Draft"}),(0,t.jsx)(d.eb,{value:"submitted",children:"Submitted"}),(0,t.jsx)(d.eb,{value:"under_review",children:"Under Review"}),(0,t.jsx)(d.eb,{value:"approved",children:"Approved"}),(0,t.jsx)(d.eb,{value:"rejected",children:"Rejected"}),(0,t.jsx)(d.eb,{value:"sealed",children:"Sealed"})]})]}),(0,t.jsxs)(d.l6,{value:m,onValueChange:x,children:[(0,t.jsx)(d.bq,{className:"w-full",children:(0,t.jsx)(d.yv,{placeholder:"All Access"})}),(0,t.jsxs)(d.gC,{children:[(0,t.jsx)(d.eb,{value:"all",children:"All Access"}),(0,t.jsx)(d.eb,{value:"public",children:"Public"}),(0,t.jsx)(d.eb,{value:"restricted",children:"Restricted"}),(0,t.jsx)(d.eb,{value:"confidential",children:"Confidential"})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,t.jsxs)(n.$,{variant:"outline",onClick:h,disabled:p,className:"w-full sm:w-auto",children:[(0,t.jsx)(D.A,{className:"w-4 h-4 mr-2 ".concat(p?"animate-spin":"")}),"Refresh"]}),(0,t.jsxs)(n.$,{onClick:g,className:"bg-blue-600 hover:bg-blue-700 text-white w-full sm:w-auto",children:[(0,t.jsx)(M.A,{className:"w-4 h-4 mr-2"}),"Upload Documents"]})]})]})})}function z(e){let{open:s,onOpenChange:a,cases:l,uploadForm:r,setUploadForm:i,uploading:x,onSubmit:h,onCancel:p,fileInputRef:g}=e;return(0,t.jsx)(o.lG,{open:s,onOpenChange:a,children:(0,t.jsxs)(o.Cf,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(o.c7,{children:[(0,t.jsx)(o.L3,{children:"Upload Documents"}),(0,t.jsx)(o.rr,{children:"Upload new documents to the system. Multiple files can be uploaded at once."})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{htmlFor:"files",children:"Select Files *"}),(0,t.jsx)(c.p,{id:"files",type:"file",ref:g,multiple:!0,onChange:e=>i(s=>({...s,files:e.target.files})),className:"cursor-pointer"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Supported formats: PDF, DOC, DOCX, TXT, JPG, PNG, etc."})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{htmlFor:"title",children:"Document Title *"}),(0,t.jsx)(c.p,{id:"title",value:r.title,onChange:e=>i(s=>({...s,title:e.target.value})),placeholder:"Enter document title"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{htmlFor:"type",children:"Document Type"}),(0,t.jsxs)(d.l6,{value:r.type,onValueChange:e=>i(s=>({...s,type:e})),children:[(0,t.jsx)(d.bq,{children:(0,t.jsx)(d.yv,{})}),(0,t.jsx)(d.gC,{children:Object.entries(I).map(e=>{let[s,a]=e;return(0,t.jsx)(d.eb,{value:s,children:a},s)})})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{htmlFor:"description",children:"Description"}),(0,t.jsx)(u.T,{id:"description",value:r.description,onChange:e=>i(s=>({...s,description:e.target.value})),placeholder:"Enter document description",rows:3})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{htmlFor:"caseId",children:"Related Case (Optional)"}),(0,t.jsxs)(d.l6,{value:r.caseId,onValueChange:e=>i(s=>({...s,caseId:e})),children:[(0,t.jsx)(d.bq,{children:(0,t.jsx)(d.yv,{placeholder:"Select a case"})}),(0,t.jsxs)(d.gC,{children:[(0,t.jsx)(d.eb,{value:"None",children:"No case selected"}),l.map(e=>(0,t.jsxs)(d.eb,{value:e.id,children:[e.caseNumber," - ",e.title]},e.id))]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{htmlFor:"accessLevel",children:"Access Level"}),(0,t.jsxs)(d.l6,{value:r.accessLevel,onValueChange:e=>i(s=>({...s,accessLevel:e})),children:[(0,t.jsx)(d.bq,{children:(0,t.jsx)(d.yv,{})}),(0,t.jsxs)(d.gC,{children:[(0,t.jsx)(d.eb,{value:"public",children:"Public"}),(0,t.jsx)(d.eb,{value:"restricted",children:"Restricted"}),(0,t.jsx)(d.eb,{value:"confidential",children:"Confidential"})]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{htmlFor:"tags",children:"Tags (comma-separated)"}),(0,t.jsx)(c.p,{id:"tags",value:r.tags,onChange:e=>i(s=>({...s,tags:e.target.value})),placeholder:"e.g., urgent, motion, evidence"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"isPublic",checked:r.isPublic,onChange:e=>i(s=>({...s,isPublic:e.target.checked})),className:"rounded border-gray-300"}),(0,t.jsx)(m.J,{htmlFor:"isPublic",className:"text-sm",children:"Make this document publicly accessible"})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t",children:[(0,t.jsx)(n.$,{variant:"outline",onClick:p,disabled:x,children:"Cancel"}),(0,t.jsx)(n.$,{onClick:h,disabled:x||!r.files||0===r.files.length,className:"bg-blue-600 hover:bg-blue-700",children:x?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(k.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(M.A,{className:"w-4 h-4 mr-2"}),"Upload Documents"]})})]})]})]})})}function R(e){var s;let{open:a,onOpenChange:l,document:c,onDownload:u,onSign:m,onSeal:x,onUpdateStatus:h,onDelete:p}=e;return c?(0,t.jsx)(o.lG,{open:a,onOpenChange:l,children:(0,t.jsxs)(o.Cf,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsx)(o.c7,{children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(o.L3,{className:"text-xl font-bold flex items-center gap-3",children:[(s=c.mimeType).startsWith("image/")?(0,t.jsx)(g,{className:"w-5 h-5"}):s.includes("pdf")?(0,t.jsx)(j.A,{className:"w-5 h-5"}):(0,t.jsx)(f,{className:"w-5 h-5"}),c.title]}),(0,t.jsxs)(o.rr,{className:"text-base mt-1",children:[c.fileName," • ",(e=>{if(0===e)return"0 Bytes";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]})(c.fileSize)]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(i.E,{className:L[c.status],children:c.status.replace("_"," ")}),(0,t.jsx)(i.E,{className:U[c.signatureStatus],children:c.signatureStatus.replace("_"," ")})]})]})}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)(r.Zp,{className:"p-4",children:[(0,t.jsxs)("h4",{className:"font-semibold mb-3 text-blue-700 flex items-center gap-2",children:[(0,t.jsx)(j.A,{className:"w-4 h-4"}),"Document Info"]}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Type:"}),(0,t.jsx)("span",{className:"font-medium",children:I[c.type]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Version:"}),(0,t.jsxs)("span",{className:"font-medium",children:["v",c.version]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Access:"}),(0,t.jsx)("span",{className:"font-medium capitalize",children:c.accessLevel})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Public:"}),(0,t.jsx)("span",{className:"font-medium",children:c.isPublic?"Yes":"No"})]})]})]}),(0,t.jsxs)(r.Zp,{className:"p-4",children:[(0,t.jsxs)("h4",{className:"font-semibold mb-3 text-green-700 flex items-center gap-2",children:[(0,t.jsx)(N.A,{className:"w-4 h-4"}),"Timeline"]}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Uploaded:"}),(0,t.jsx)("span",{className:"font-medium",children:c.uploadedAt.toLocaleDateString()})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Modified:"}),(0,t.jsx)("span",{className:"font-medium",children:c.lastModified.toLocaleDateString()})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"By:"}),(0,t.jsx)("span",{className:"font-medium",children:c.uploadedBy})]})]})]}),(0,t.jsxs)(r.Zp,{className:"p-4",children:[(0,t.jsxs)("h4",{className:"font-semibold mb-3 text-purple-700 flex items-center gap-2",children:[(0,t.jsx)(y.A,{className:"w-4 h-4"}),"Security"]}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Status:"}),(0,t.jsx)("span",{className:"font-medium capitalize",children:c.status.replace("_"," ")})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Signature:"}),(0,t.jsx)("span",{className:"font-medium capitalize",children:c.signatureStatus.replace("_"," ")})]}),c.digitalSignature&&(0,t.jsx)("div",{className:"bg-green-50 p-2 rounded mt-2",children:(0,t.jsxs)("p",{className:"text-xs text-green-800",children:["Signed by ",c.digitalSignature.signedBy," on"," ",c.digitalSignature.signedAt.toLocaleDateString()]})}),c.seal&&(0,t.jsx)("div",{className:"bg-purple-50 p-2 rounded mt-2",children:(0,t.jsxs)("p",{className:"text-xs text-purple-800",children:[c.seal.sealType," seal applied by ",c.seal.sealedBy," on"," ",c.seal.sealedAt.toLocaleDateString()]})})]})]})]}),c.description&&(0,t.jsxs)(r.Zp,{className:"p-4",children:[(0,t.jsx)("h4",{className:"font-semibold mb-3 text-gray-800",children:"Description"}),(0,t.jsx)("p",{className:"text-gray-700 leading-relaxed",children:c.description})]}),c.caseId&&(0,t.jsxs)(r.Zp,{className:"p-4",children:[(0,t.jsx)("h4",{className:"font-semibold mb-3 text-blue-700",children:"Related Case"}),(0,t.jsxs)("div",{className:"bg-blue-50 p-3 rounded",children:[(0,t.jsx)("p",{className:"font-medium text-blue-900",children:c.caseNumber}),(0,t.jsxs)("p",{className:"text-sm text-blue-700",children:["Case ID: ",c.caseId]})]})]}),c.tags.length>0&&(0,t.jsxs)(r.Zp,{className:"p-4",children:[(0,t.jsx)("h4",{className:"font-semibold mb-3 text-gray-800",children:"Tags"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:c.tags.map((e,s)=>(0,t.jsx)(i.E,{variant:"outline",className:"bg-gray-100",children:e},s))})]}),(0,t.jsxs)(r.Zp,{className:"p-4",children:[(0,t.jsx)("h4",{className:"font-semibold mb-3 text-gray-800",children:"Actions"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,t.jsxs)(n.$,{onClick:()=>u(c),className:"bg-blue-600 hover:bg-blue-700",children:[(0,t.jsx)(w.A,{className:"w-4 h-4 mr-2"}),"Download"]}),"unsigned"===c.signatureStatus&&(0,t.jsxs)(n.$,{onClick:()=>m(c.id),className:"bg-green-600 hover:bg-green-700",children:[(0,t.jsx)(S,{className:"w-4 h-4 mr-2"}),"Digital Sign"]}),"approved"===c.status&&"sealed"!==c.signatureStatus&&(0,t.jsxs)(d.l6,{onValueChange:e=>x(c.id,e),children:[(0,t.jsx)(d.bq,{className:"w-[200px]",children:(0,t.jsx)(d.yv,{placeholder:"Apply Seal"})}),(0,t.jsxs)(d.gC,{children:[(0,t.jsx)(d.eb,{value:"court",children:"Court Seal"}),(0,t.jsx)(d.eb,{value:"judicial",children:"Judicial Seal"}),(0,t.jsx)(d.eb,{value:"administrative",children:"Administrative Seal"})]})]}),(0,t.jsxs)(d.l6,{onValueChange:e=>h(c.id,e),children:[(0,t.jsx)(d.bq,{className:"w-[200px]",children:(0,t.jsx)(d.yv,{placeholder:"Change Status"})}),(0,t.jsxs)(d.gC,{children:[(0,t.jsx)(d.eb,{value:"draft",children:"Set to Draft"}),(0,t.jsx)(d.eb,{value:"submitted",children:"Set to Submitted"}),(0,t.jsx)(d.eb,{value:"under_review",children:"Set to Under Review"}),(0,t.jsx)(d.eb,{value:"approved",children:"Set to Approved"}),(0,t.jsx)(d.eb,{value:"rejected",children:"Set to Rejected"})]})]}),(0,t.jsxs)(n.$,{onClick:()=>p(c.id),variant:"destructive",children:[(0,t.jsx)(A.A,{className:"w-4 h-4 mr-2"}),"Delete Document"]})]})]})]})]})}):null}function B(e){let{collections:s={documents:_.I.DOCUMENTS||"documents",cases:_.I.CASES||"cases"},initialDocuments:a,allowedDocumentTypes:i,hideActions:c=!1,className:d=""}=e,[o,u]=(0,l.useState)(a||[]),[m,h]=(0,l.useState)([]),[p,g]=(0,l.useState)(!a),[f,v]=(0,l.useState)(!1),[N,y]=(0,l.useState)(""),[b,w]=(0,l.useState)("all"),[S,A]=(0,l.useState)("all"),[C,D]=(0,l.useState)("all"),[I,L]=(0,l.useState)(!1),[U,B]=(0,l.useState)(!1),[V,q]=(0,l.useState)(null),[J,G]=(0,l.useState)(null),[Z,H]=(0,l.useState)(null),W=(0,l.useRef)(null),[$,K]=(0,l.useState)({title:"",description:"",type:"other",caseId:"",tags:"",isPublic:!1,accessLevel:"restricted",files:null});(0,l.useEffect)(()=>{a||X(),Y()},[a]),(0,l.useEffect)(()=>{if(J||Z){let e=setTimeout(()=>{G(null),H(null)},5e3);return()=>clearTimeout(e)}},[J,Z]);let X=async()=>{g(!0);try{let e=(await (0,F.UK)(s.documents)).map(e=>{var s,a,t,l;return{...e,uploadedAt:(null==(s=e.uploadedAt)?void 0:s.toDate)?e.uploadedAt.toDate():new Date(e.uploadedAt),lastModified:(null==(a=e.lastModified)?void 0:a.toDate)?e.lastModified.toDate():new Date(e.lastModified),digitalSignature:e.digitalSignature?{...e.digitalSignature,signedAt:(null==(t=e.digitalSignature.signedAt)?void 0:t.toDate)?e.digitalSignature.signedAt.toDate():new Date(e.digitalSignature.signedAt)}:void 0,seal:e.seal?{...e.seal,sealedAt:(null==(l=e.seal.sealedAt)?void 0:l.toDate)?e.seal.sealedAt.toDate():new Date(e.seal.sealedAt)}:void 0}});u(e)}catch(e){console.error("Error loading documents:",e),G("Failed to load documents")}finally{g(!1)}},Y=async()=>{try{let e=await (0,F.UK)(s.cases);h(e)}catch(e){console.error("Error loading cases:",e)}},Q=async()=>{if(!$.files||0===$.files.length)return void G("Please select at least one file to upload");if(!$.title.trim())return void G("Please enter a document title");v(!0),G(null);try{let e=Array.from($.files).map(async e=>{var a;let t={id:"doc_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),title:$.files.length>1?"".concat($.title," - ").concat(e.name):$.title,description:$.description,type:$.type,status:"draft",signatureStatus:"unsigned",fileName:e.name,fileSize:e.size,mimeType:e.type,caseId:$.caseId||void 0,caseNumber:$.caseId?null==(a=m.find(e=>e.id===$.caseId))?void 0:a.caseNumber:void 0,uploadedBy:"current_user_id",uploadedAt:new Date,lastModified:new Date,version:1,tags:$.tags.split(",").map(e=>e.trim()).filter(Boolean),isPublic:$.isPublic,accessLevel:$.accessLevel};if(console.log("Would upload file: ".concat(e.name," (").concat(e.size," bytes)")),await (0,F.CW)(s.documents,t))return t;throw Error("Failed to upload ".concat(e.name))}),a=await Promise.all(e);u(e=>[...e,...a]),H("Successfully uploaded ".concat(a.length," document(s)")),L(!1),ee()}catch(e){console.error("Error uploading documents:",e),G("Failed to upload documents")}finally{v(!1)}},ee=()=>{K({title:"",description:"",type:"other",caseId:"",tags:"",isPublic:!1,accessLevel:"restricted",files:null}),W.current&&(W.current.value="")},es=async(e,a)=>{try{let t=o.find(s=>s.id===e);if(!t)return;let l={...t,status:a,lastModified:new Date};(await (0,F.nc)(l,s.documents,e)).success?(u(s=>s.map(s=>s.id===e?l:s)),H("Document status updated to ".concat(a))):G("Failed to update document status")}catch(e){console.error("Error updating document status:",e),G("Error updating document status")}},ea=async e=>{try{let a=o.find(s=>s.id===e);if(!a)return;let t={...a,signatureStatus:"digitally_signed",digitalSignature:{signedBy:"current_user_id",signedAt:new Date,signatureHash:"sig_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))},lastModified:new Date};(await (0,F.nc)(t,s.documents,e)).success?(u(s=>s.map(s=>s.id===e?t:s)),H("Document digitally signed")):G("Failed to sign document")}catch(e){console.error("Error signing document:",e),G("Error signing document")}},et=async(e,a)=>{try{let t=o.find(s=>s.id===e);if(!t)return;let l={...t,signatureStatus:"sealed",seal:{sealedBy:"current_user_id",sealedAt:new Date,sealType:a},lastModified:new Date};(await (0,F.nc)(l,s.documents,e)).success?(u(s=>s.map(s=>s.id===e?l:s)),H("Document sealed with ".concat(a," seal"))):G("Failed to seal document")}catch(e){console.error("Error sealing document:",e),G("Error sealing document")}},el=async e=>{if(confirm("Are you sure you want to delete this document? This action cannot be undone."))try{(await (0,F.Wv)(s.documents,e)).success?(u(s=>s.filter(s=>s.id!==e)),H("Document deleted successfully")):G("Failed to delete document")}catch(e){console.error("Error deleting document:",e),G("Error deleting document")}},er=e=>{q(e),B(!0)},en=e=>{alert("Download functionality would be implemented here")},ei=o.filter(e=>{let s=e.title.toLowerCase().includes(N.toLowerCase())||e.fileName.toLowerCase().includes(N.toLowerCase())||e.description.toLowerCase().includes(N.toLowerCase()),a="all"===b||e.type===b,t="all"===S||e.status===S,l="all"===C||e.accessLevel===C;return s&&a&&t&&l});return(0,t.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 space-y-6 ".concat(d),children:[(0,t.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Document Management"}),(0,t.jsx)("p",{className:"text-gray-600",children:p?"Loading documents...":"Manage all court documents (".concat(ei.length," documents)")})]})}),Z&&(0,t.jsxs)(x.Fc,{className:"border-green-200 bg-green-50",children:[(0,t.jsx)(E.A,{className:"h-4 w-4 text-green-600"}),(0,t.jsx)(x.TN,{className:"text-green-800",children:Z})]}),J&&(0,t.jsxs)(x.Fc,{className:"border-red-200 bg-red-50",children:[(0,t.jsx)(T.A,{className:"h-4 w-4 text-red-600"}),(0,t.jsx)(x.TN,{className:"text-red-800",children:J})]}),(0,t.jsx)(P,{searchTerm:N,setSearchTerm:y,typeFilter:b,setTypeFilter:w,statusFilter:S,setStatusFilter:A,accessFilter:C,setAccessFilter:D,onRefresh:X,loading:p,onUpload:()=>L(!0)}),p?(0,t.jsxs)("div",{className:"flex justify-center items-center py-12",children:[(0,t.jsx)(k.A,{className:"w-8 h-8 animate-spin text-blue-600"}),(0,t.jsx)("span",{className:"ml-2 text-lg",children:"Loading documents..."})]}):0===ei.length?(0,t.jsx)(r.Zp,{className:"p-8 sm:p-12 text-center",children:(0,t.jsxs)("div",{className:"max-w-md mx-auto space-y-4",children:[(0,t.jsx)(j.A,{className:"w-16 h-16 mx-auto text-gray-400"}),(0,t.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"No Documents Found"}),(0,t.jsx)("p",{className:"text-gray-600",children:0===o.length?"No documents have been uploaded yet. Click 'Upload Documents' to get started.":"No documents match your current filters. Try adjusting your search criteria."}),(0,t.jsxs)(n.$,{onClick:()=>L(!0),className:"bg-blue-600 hover:bg-blue-700",children:[(0,t.jsx)(M.A,{className:"w-4 h-4 mr-2"}),"Upload Documents"]})]})}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ei.map(e=>(0,t.jsx)(O,{document:e,onView:er,onDownload:en,onSign:ea,onSeal:et,onUpdateStatus:es,onDelete:el},e.id))}),(0,t.jsx)(z,{open:I,onOpenChange:L,cases:m,uploadForm:$,setUploadForm:K,uploading:f,onSubmit:Q,onCancel:()=>{L(!1),ee()},fileInputRef:W}),(0,t.jsx)(R,{open:U,onOpenChange:B,document:V,onDownload:en,onSign:ea,onSeal:et,onUpdateStatus:es,onDelete:el})]})}function V(e){let{className:s=""}=e;return(0,t.jsx)(B,{collections:{documents:_.I.DOCUMENTS||"documents",cases:_.I.CASES||"cases"},className:s})}},83421:(e,s,a)=>{Promise.resolve().then(a.bind(a,78491))},91788:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[9135,3965,9352,373,6345,9543,6544,308,5615,8441,1684,7358],()=>s(83421)),_N_E=e.O()}]);